
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.11">
    
    
      
        <title>Packaging hie implementations - EMR and LIS Data Exchange Knowledge Base</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.50e68009.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#packaging-hie-implementations" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../index.html" title="EMR and LIS Data Exchange Knowledge Base" class="md-header__button md-logo" aria-label="EMR and LIS Data Exchange Knowledge Base" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            EMR and LIS Data Exchange Knowledge Base
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Packaging hie implementations
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../index.html" title="EMR and LIS Data Exchange Knowledge Base" class="md-nav__button md-logo" aria-label="EMR and LIS Data Exchange Knowledge Base" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    EMR and LIS Data Exchange Knowledge Base
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../index.html" class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../country-guides/index.html" class="md-nav__link">
        Country Projects
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        Developer Guides
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../demo-directory.html" class="md-nav__link">
        Demo Servers
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../lis-workflows/lis-workflows.html" class="md-nav__link">
        Laboratory Workflows
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../mpi-workflows.html" class="md-nav__link">
        Client Registry / MPI Workflows
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../faq.html" class="md-nav__link">
        FAQ
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../about.html" class="md-nav__link">
        About
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../get-additional-help.html" class="md-nav__link">
        Get Additional Help
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#packaging-hie-implementations" class="md-nav__link">
    Packaging Hie Implementations
  </a>
  
    <nav class="md-nav" aria-label="Packaging Hie Implementations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    References:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#steps" class="md-nav__link">
    Steps:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-add-scripts-for-downloading-instant-openhie-v2-cli-and-add-utilities" class="md-nav__link">
    1. Add scripts for downloading Instant OpenHIE V2 CLI and add utilities.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-add-dockerfile-in-root-directory-of-the-project-that-inherits-from-instant-openhie-parent-docker-image" class="md-nav__link">
    2. Add Dockerfile in root directory of the project that inherits from Instant OpenHIE Parent Docker Image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-download-cli" class="md-nav__link">
    3. Download CLI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-build-and-publish-docker-image" class="md-nav__link">
    4. Build and publish Docker image
  </a>
  
    <nav class="md-nav" aria-label="4. Build and publish Docker image">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-build-local-docker-image" class="md-nav__link">
    4.1. Build Local Docker image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-publish-docker-image" class="md-nav__link">
    4.2. Publish Docker image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-update-configyml-file" class="md-nav__link">
    4.3. Update config.yml file
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-add-hie-components" class="md-nav__link">
    5. Add HIE components
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migrating-hie-components-to-instant-hie-v2" class="md-nav__link">
    Migrating HIE Components to instant HIE V2
  </a>
  
    <nav class="md-nav" aria-label="Migrating HIE Components to instant HIE V2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#description-of-components-of-instant-hie-v2" class="md-nav__link">
    Description of components of instant HIE v2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#description-of-components-of-instant-openhie-v2-package" class="md-nav__link">
    Description of components of instant openHIE V2 package
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                

  <h1>Packaging hie implementations</h1>

<h3 id="packaging-hie-implementations">Packaging Hie Implementations</h3>
<h4 id="references">References:</h4>
<ul>
<li><a href="https://github.com/jembi/platform">https://github.com/jembi/platform</a></li>
<li><a href="https://jembi.gitbook.io/openhim-platform/">https://jembi.gitbook.io/openhim-platform/</a></li>
<li><a href="https://jembi.gitbook.io/instant-v2/">https://jembi.gitbook.io/instant-v2/</a></li>
</ul>
<h4 id="steps">Steps:</h4>
<h4 id="1-add-scripts-for-downloading-instant-openhie-v2-cli-and-add-utilities">1. Add scripts for downloading Instant OpenHIE V2 CLI and add utilities.</h4>
<p><a href="https://github.com/jembi/platform/blob/main/get-cli.sh">https://github.com/jembi/platform/blob/main/get-cli.sh</a>
<a href="https://github.com/jembi/platform/tree/main/utils">https://github.com/jembi/platform/tree/main/utils</a></p>
<h4 id="2-add-dockerfile-in-root-directory-of-the-project-that-inherits-from-instant-openhie-parent-docker-image">2. Add Dockerfile in root directory of the project that inherits from Instant OpenHIE Parent Docker Image</h4>
<p><a href="https://github.com/jembi/platform/blob/main/Dockerfile">https://github.com/jembi/platform/blob/main/Dockerfile</a></p>
<h4 id="3-download-cli">3. Download CLI</h4>
<p><code>./get-cli.sh</code></p>
<h4 id="4-build-and-publish-docker-image">4. Build and publish Docker image</h4>
<h5 id="41-build-local-docker-image">4.1. Build Local Docker image</h5>
<h5 id="42-publish-docker-image">4.2. Publish Docker image</h5>
<h5 id="43-update-configyml-file">4.3. Update config.yml file</h5>
<h4 id="5-add-hie-components">5. Add HIE components</h4>
<h3 id="migrating-hie-components-to-instant-hie-v2">Migrating HIE Components to instant HIE V2</h3>
<h4 id="description-of-components-of-instant-hie-v2">Description of components of instant HIE v2</h4>
<ol>
<li>
<p>config.yaml - Configuartion file for the project that has a list of the componenet packages and other project configurations</p>
</li>
<li>
<p>Util folder - Contains scripts for bringing up and down the different components.These utilities are used in every packages swarm.sh file</p>
</li>
<li>
<p>build-image.sh file - The file builds a local docker image that packages the instant HIE v2 project and allows it to be run using the instant CLI.
    NOTE: Make sure the image name and tag matches what you have in the config.yaml file.</p>
</li>
</ol>
<p>4.get-cli.sh - It downloads the architecure specific instant CLI executable and saves it in the project root directory.This allows the CLI to be run with the <code>./instant</code> command.</p>
<p>5.dockerfile - Packages the openHIE Components into a docker image and allows it to be run using the instant CLI.The image its self is built with the build-image.sh file</p>
<ol>
<li>.env file - Contains the settings for the various components.This file needs to be customised for each implementation.</li>
</ol>
<h4 id="description-of-components-of-instant-openhie-v2-package">Description of components of instant openHIE V2 package</h4>
<pre><code>1.swarm.sh - Package specific file that controls the life cycle of the HIE components using docker swarm and the utilities from the util folder.This script contains all the intiliazation and tear down logic requried to bring the component up in the right context.

2.package-metadata.json - Contains default configuarations and settings for the package.

3.List of docker compose files - Varius services are defined with docker-compose files.Additional settings rquired to bring up these services in dev/cluster mode are separeted into there own docker-compose files.Boot up and control of these docker-compose files is defined in swarm.sh
</code></pre>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.092fa1f6.min.js"}</script>
    
    
      <script src="../../assets/javascripts/bundle.5a9542cf.min.js"></script>
      
    
  </body>
</html>